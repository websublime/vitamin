<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <script type="importmap">
    {
      "imports": {
        "lit": "https://cdn.jsdelivr.net/npm/lit@3.0.0-pre.0/+esm",
        "lit/": "https://cdn.jsdelivr.net/npm/lit@3.0.0-pre.0/",
        "lit-html": "https://cdn.jsdelivr.net/npm/lit-html@3.0.0-pre.0/+esm",
        "lit-html/": "https://cdn.jsdelivr.net/npm/lit-html@3.0.0-pre.0/",
        "@lit/reactive-element": "https://cdn.jsdelivr.net/npm/@lit/reactive-element@2.0.0-pre.0/+esm",
        "@lit/reactive-element/": "https://cdn.jsdelivr.net/npm/@lit/reactive-element@2.0.0-pre.0/"
      }
    }
    </script>
    <script>
      new EventSource('/esbuild').addEventListener('change', e => {
        const { added, removed, updated } = JSON.parse(e.data);

        if (!added.length && !removed.length && updated.length === 1) {
          for (const link of document.getElementsByTagName("link")) {
            const url = new URL(link.href);

            if (url.host === location.host && url.pathname === updated[0]) {
              const next = link.cloneNode();
              next.href = updated[0] + '?' + Math.random().toString(36).slice(2);
              next.onload = () => link.remove();
              link.parentNode.insertBefore(next, link.nextSibling);

              return;
            }
          }
        }

        location.reload();
      });
    </script>
  </head>
  <body style="height: 100vh;">
    <card-component></card-component>
    <script type="module" src="js/main.js"></script>
  </body>
</html>
